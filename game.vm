product-id: ${v_game_code} 
comment: Tiptoi-Craft
welcome: willkommen
media-path: ../Audio/%s
gme-lang: GERMAN

init: $location:=0 $wuerfel:=1 $gamemodus:=99 $selecteditem:=99 #foreach($v_item in $v_items) #if($v_item.v_limit) #if($v_item.v_codes) #foreach($v_code in $v_item.v_codes) $limit_${v_item.v_id}_${v_code}:=$v_item.v_limit #end #end #end #end $inventory_hearts:=10

scripts:

# START ITEMS MAIN LOOP
#foreach($v_item in $v_items)
    #set( $v_currentitem = $velocityCount)

    ${v_item.v_id}_item_script:
#foreach($v_modus in $v_modi)
    - $gamemodus==${velocityCount}? J(${v_item.v_id}_${v_modus.v_id})
#end
    - $inventory_${v_item.v_id}==0? #foreach($v_need in ${v_item.v_needs}) $inventory_${v_need.v_src} < ${v_need.v_quantity}?#end $selecteditem:=$v_currentitem P(item_${v_item.v_id}_selectednoinv)
    - $selecteditem:=$v_currentitem P(item_${v_item.v_id}_selected) J(${v_item.v_id}_inventory)


## HARVEST ##

    ${v_item.v_id}_harvest:
    - $gamemodus==3? $selecteditem:=$v_currentitem J(${v_item.v_id}_inventory)
    - P(${v_item.v_id}_noharvest) $selecteditem:=$v_currentitem J(${v_item.v_id}_info)

#foreach($v_code in ${v_item.v_codes}) 
#if(${v_item.v_mode}=="harvest")
    ${v_item.v_id}_${v_code}_harvest:
#if(${v_item.v_needs})
    #foreach($v_need in ${v_item.v_needs}) 
    - $inventory_${v_need.v_src} < ${v_need.v_quantity}? P(item_need) P(item_${v_need.v_src}_${v_need.v_quantity}) P(${v_item.v_id}_to_harvest)
    #end
#end
#if($v_item.v_limit) 
    - $limit_${v_item.v_id}_${v_code}<1? P(${v_item.v_id}_limited)
    - $inventory_${v_item.v_id}+=${v_item.v_quantity} $limit_${v_item.v_id}_${v_code}-=1  P(${v_item.v_id}_harvest) J(${v_item.v_id}_inventory)
#else
    - $inventory_${v_item.v_id}+=${v_item.v_quantity} P(${v_item.v_id}_harvest) J(${v_item.v_id}_inventory)
#end
#end
#end


## ATTACK ##

    ${v_item.v_id}_attack:
    - $gamemodus==3? $selecteditem:=$v_currentitem J(${v_item.v_id}_info)
    - P(${v_item.v_id}_noattack) $selecteditem:=$v_currentitem J(${v_item.v_id}_info)

#foreach($v_code in ${v_item.v_codes}) 
#if(${v_item.v_mode}=="attack")
    ${v_item.v_id}_${v_code}_attack:
    - $gamemodus==3? J(${v_item.v_id}_info) 
#if(${v_item.v_needs})
#foreach($v_need in ${v_item.v_needs}) 
    - $inventory_${v_need.v_src} < ${v_need.v_quantity}? P(item_need) P(item_${v_need.v_src}_${v_need.v_quantity}) P(${v_item.v_id}_to_attack)
#end
#end
#if($v_item.v_limit) 
    - $limit_${v_item.v_id}_${v_code}<1? P(${v_item.v_id}_limited)
    - $limit_${v_item.v_id}_${v_code}-=1  P(${v_item.v_id}_attack) J(${v_item.v_id}_attack_drop_rnd)
#else
    - P(${v_item.v_id}_attack) J(${v_item.v_id}_attack_drop_rnd)
#end
#end

#set($v_dropcounter = 0)
#set($v_losscounter = 0)

    ${v_item.v_id}_attack_drop:
#if (${v_item.v_drops})
#foreach($v_drop in ${v_item.v_drops})
#set($range = [${v_drop.v_min}..${v_drop.v_max}])
#foreach($i in $range)
    - $attack_rnd==$v_dropcounter? $inventory_${v_item.v_id}+=${i} P(${v_item.v_id}_attack_drop_$v_dropcounter) J(${v_item.v_id}_attack_loss_rnd)
#set($v_dropcounter = $v_dropcounter+1)
#end
#end
#end
    - J(${v_item.v_id}_attack_loss_rnd)

    ${v_item.v_id}_attack_loss:
#if (${v_item.v_needs})
#foreach($v_loss in ${v_item.v_needs})
#if(${v_loss.v_min})
#set($range = [${v_loss.v_min}..${v_loss.v_max}])
#foreach($i in $range)
    - $loss_rnd==$v_losscounter? $inventory_${v_loss.v_src}-=${i} P(${v_item.v_id}_attack_loss_$v_losscounter) J(${v_item.v_id}_inventory)
#set($v_losscounter = $v_losscounter+1)
#end
#end
#end
#end
    - J(${v_item.v_id}_inventory)

    ${v_item.v_id}_attack_drop_rnd:
    - #if (${v_item.v_drops}) T($r,65535) $rnd+=$r $rnd*=25173 $rnd+=13849 $attack_rnd:=$rnd $attack_rnd%=${v_dropcounter} #end J(${v_item.v_id}_attack_drop)

    ${v_item.v_id}_attack_loss_rnd:
    - #if (${v_item.v_needs}) T($r,65535) $rnd+=$r $rnd*=25173 $rnd+=13849 $loss_rnd:=$rnd $loss_rnd%=${v_losscounter} #end J(${v_item.v_id}_attack_loss)
#end


## CRAFTING AND EATING ##

    ${v_item.v_id}_craft:
    - $gamemodus==3?  $selecteditem:=$v_currentitem J(${v_item.v_id}_info)
#if(${v_item.v_needs} && ${v_item.v_mode}=="craft")
#foreach($v_need in ${v_item.v_needs}) 
    - $inventory_${v_need.v_src} < ${v_need.v_quantity}? $selecteditem:=$v_currentitem P(item_need) P(item_${v_need.v_src}_${v_need.v_quantity}) P(${v_item.v_id}_to_craft)
#end
    - $inventory_${v_item.v_id}+=${v_item.v_quantity} #foreach($v_need in ${v_item.v_needs}) #if($v_need.v_tool) #else $inventory_${v_need.v_src}-=${v_need.v_quantity} #end #end  $selecteditem:=$v_currentitem P(${v_item.v_id}_craft) J(${v_item.v_id}_inventory) 
#else
    -  $selecteditem:=$v_currentitem P(${v_item.v_id}_nocraft) 
#end


    ${v_item.v_id}_eat:
    - $gamemodus==3? $selecteditem:=$v_currentitem J(${v_item.v_id}_inventory)
#if(${v_item.v_hearts})
    - $inventory_${v_item.v_id}>=1? $inventory_${v_item.v_id}-=1 $inventory_hearts+=1 $selecteditem:=$v_currentitem P(${v_item.v_id}_eat) 
#else
    - $selecteditem:=$v_currentitem P(${v_item.v_id}_noeat) 
#end


## ITEM INFO ##

    ${v_item.v_id}_info:
       - P(${v_item.v_id}_infotxt) $selecteditem:=$v_currentitem J(${v_item.v_id}_inventory)

    ${v_item.v_id}_inventory:
#set($v_rangeend=$v_maxitems - 1)
#set($range = [0..$v_rangeend])
#foreach($i in $range)
    - $inventory_${v_item.v_id}==${i}? P(item_${v_item.v_id}_inventory_${i}) J(random2)
#end
    - P(item_${v_item.v_id}_inventory_more) J(random2)

    ${v_item.v_id}_inventory_bycode:
    - $inventory_${v_item.v_id}>=${v_maxitems}? P(item_${v_item.v_id}_inventory_more) J(random2)
    - $t_scriptcode:=$v_currentitem $t_scriptcode*=$v_maxitems $t_scriptcode+=$inventory_${v_item.v_id}  $t_scriptcode+=$v_script_offset_itemname_quantity  P(item_inventory) J($t_scriptcode)

    ${v_item.v_id}_no:
#set($v_rangeend=$v_maxitems - 1)
#set($range = [0..$v_rangeend])
#foreach($i in $range)
    - $inventory_${v_item.v_id}==${i}? P(item_${v_item.v_id}_${i})
#end
    - P(item_${v_item.v_id}_more)

#set($v_rangeend=$v_maxitems - 1)
#set($range = [0..$v_rangeend])
#foreach($i in $range)
    ${v_item.v_id}_no_${i}:
    - P(item_${v_item.v_id}_${i})
#end

    item_${v_item.v_id}_name_s:
    - P(item_${v_item.v_id}_name_s)

    item_${v_item.v_id}_name_p:
    - P(item_${v_item.v_id}_name_p)

#end
# END ITEMS MAIN LOOP



## QUANTITY AND INVENTORY HELPERS

#set($range = [0..64])
#foreach($i in $range)
#set($v_scriptcode=$i+$v_script_offset_quantity)
    quantity_${v_scriptcode}:
    - P(quantity_${i}) J($scriptcallback)
#end

    item_quantity_name_s:
    - $itemnamescriptcode:=$v_script_offset_quantity $itemnamescriptcode+=$itemquantity $scriptcallback:=10 J($itemnamescriptcode)

    item_name_s:
    - $itemnamescriptcode:=$v_script_offset_itemname_s $itemnamescriptcode+=$itemnameselected J($itemnamescriptcode)

    item_quantity_name_p:
    - $itemnamescriptcode:=$v_script_offset_quantity $itemnamescriptcode+=$itemquantity $scriptcallback:=11 J($itemnamescriptcode)

    item_name_p:
    - $itemnamescriptcode:=$v_script_offset_itemname_p $itemnamescriptcode+=$itemnameselected J($itemnamescriptcode)



## GENERAL ##
#foreach($v_item in $v_info)
    ${v_item.v_id}_info_script:
    - P(${v_item.v_id})
#end

#foreach($v_modus in $v_modi)
    ${v_modus.v_id}_modus_script:
#foreach($v_item in $v_items)
    - $selecteditem==${velocityCount}? J(${v_item.v_id}_${v_modus.v_id})
#end
    - $gamemodus:=${velocityCount} P(modus_${v_modus.v_id}_selected)

#end


    cheat_inventory:
    #foreach($v_item in $v_items) 
    - $selecteditem==${velocityCount}? $inventory_${v_item.v_id}:=99  J(${v_item.v_id}_inventory)
    #end

    random:
    - $gamemodus:=99 $selecteditem:=99 J(random2)

    random2:
    - T($r,65535) $rnd+=$r $rnd*=25173 $rnd+=13849 $wuerfel:=$rnd $wuerfel%=3 $wuerfel+=1

language: de

scriptcodes:



# START ITEMS SCRIPT LOOP
#foreach($v_item in $v_items)
#set($v_currentitem=$velocityCount)

    ${v_item.v_id}_item_script: $v_mcode[${v_item.v_code}]
#if(${v_item.v_codes})
#foreach(${v_code} in ${v_item.v_codes}) 
    ${v_item.v_id}_${v_code}_${v_item.v_mode}: $v_mcode[${v_code}] 
#end
#end
#set($v_scriptcode=$v_script_offset_itemname_p+$velocityCount)
    item_${v_item.v_id}_name_p: $v_scriptcode
#set($v_scriptcode=$v_script_offset_itemname_s+$velocityCount)
    item_${v_item.v_id}_name_s: $v_scriptcode

#set($v_rangeend=$v_maxitems - 1)
#set($range = [0..$v_rangeend])
#foreach($i in $range)
#set($v_scriptcode=$v_script_offset_itemname_quantity+$v_currentitem*$v_maxitems+$i)
    ${v_item.v_id}_no_${i}: $v_scriptcode
#end

#end
# END ITEMS SCRIPT LOOP

    item_name_s: $c_item_name_s_code
    item_name_p: $c_item_name_p_code

#set($v_rangeend=$v_maxitems - 1)
#set($range = [0..$v_rangeend])
#foreach($i in $range)
#set($v_scriptcode=$i+$v_script_offset_quantity)
    quantity_${v_scriptcode}: $v_scriptcode
#end

    cheat_inventory: $v_mcode[$v_cheat_inventory_code]
    cheat_mode: $v_mcode[$v_cheat_mode_code]

#foreach($v_item in $v_info)
    ${v_item.v_id}_info_script: $v_mcode[${v_item.v_code}]
#end

#foreach($v_item in $v_modi)
    ${v_item.v_id}_modus_script: $v_mcode[${v_item.v_code}]
#end